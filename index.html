<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quiz App - Trắc Nghiệm Thông Minh</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="quiz-container">
      <header>
        <div class="header-content">
          <div style="flex: 1">
            <div class="progress-info">
              <span id="questionCounter">Chọn chế độ để bắt đầu</span>
              <span id="timer">00:00</span>
            </div>
            <div class="progress-container">
              <div class="progress-bar" id="progressBar"></div>
            </div>
          </div>
          <button class="btn btn-help" id="helpButton" title="Phím tắt">
            <i class="fas fa-question-circle"></i>
          </button>
          <button
            class="btn btn-end"
            id="endButton"
            onclick="endQuiz()"
            style="display: none"
          >
            <i class="fas fa-stop"></i> Kết thúc
          </button>
        </div>
      </header>

      <!-- Chọn chế độ -->
      <div id="modeSelection" class="mode-selection">
        <button class="mode-btn" onclick="startMode('all')">
          <i class="fas fa-list-ol"></i> Làm tất cả
        </button>
        <button class="mode-btn" onclick="startMode('part')">
          <i class="fas fa-th-large"></i> Làm theo phần (50 câu)
        </button>
        <button class="mode-btn" onclick="startMode('wrong')">
          <i class="fas fa-redo"></i> Làm lại câu sai
        </button>
        <button class="mode-btn random" onclick="startMode('random')">
          <i class="fas fa-dice"></i> Thi thử 40 câu
        </button>
      </div>

      <!-- Khu vực làm bài -->
      <div id="quizArea" class="quiz-area">
        <div id="partSelector" class="part-selector" style="display: none">
          <label for="partSelect"><strong>Chọn phần:</strong></label>
          <select id="partSelect" onchange="selectPart(this.value)"></select>
        </div>
        <div id="quizForm" class="quiz-form-container"></div>
      </div>
    </div>

    <!-- Modal Kết quả -->
    <div id="resultModal" class="modal">
      <div class="modal-content">
        <h3>Kết quả bài làm</h3>
        <div class="modal-score" id="modalScore">0 / 0</div>
        <div class="modal-stats">
          <div class="modal-stat">
            Đúng: <strong id="modalCorrect">0</strong>
          </div>
          <div class="modal-stat">Sai: <strong id="modalWrong">0</strong></div>
          <div class="modal-stat">
            Tỷ lệ: <strong id="modalPercent">0%</strong>
          </div>
          <div class="modal-stat">
            Thời gian: <strong id="modalTime">00:00</strong>
          </div>
        </div>
        <button class="btn" onclick="closeModal()">Quay lại</button>
      </div>
    </div>

    <!-- Modal Phím tắt -->
    <div id="helpModal" class="modal">
      <div class="modal-content">
        <h3><i class="fas fa-keyboard"></i> Phím tắt</h3>
        <div class="keyboard-help">
          <ul>
            <li>
              <div><kbd>1</kbd> <kbd>2</kbd> <kbd>3</kbd> <kbd>4</kbd></div>
              <div><kbd>A</kbd> <kbd>B</kbd> <kbd>C</kbd> <kbd>D</kbd></div>
            </li>
            <li><kbd>→</kbd><kbd>Câu tiếp theo</kbd></li>
            <li><kbd>←</kbd> <kbd>Câu trước</kbd></li>
            <li><kbd>S</kbd> <kbd>Xáo trộn</kbd></li>
            <li><kbd>E</kbd> <kbd>Kết thúc</kbd></li>
            <li><kbd>Space</kbd> <kbd>Preview đáp án</kbd></li>
          </ul>
        </div>
        <button class="btn" onclick="closeHelpModal()">Đóng</button>
      </div>
    </div>

    <script src="main.js"></script>
  </body>
</html>
